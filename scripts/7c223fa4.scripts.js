"use strict";angular.module("hnhtApp",["hnResource","idResource"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("hnhtApp").controller("MainCtrl",["$scope","$location","$timeout","items","latestThread",function(a,b,c,d,e){var f=function(){e.get({},function(b){var c=b.results[0].item._id;d.get({limit:g,start:h,"filter[fields][parent_sigid]":c,q:i.join(" ")},function(b){a.results=b.results;var c=b.hits,d=parseInt(h,10)+parseInt(g,10);a.nextStart=c-g>d?d:!1;var e=h-g;a.prevStart=1>e?!1:e;var f=c%parseInt(g,10);0===f&&(f=g),a.lastStart=d>c?!1:c-f,a.total=c,a.start=h,a.end=h+a.results.length})})};a.location=b;var g=b.search().limit||10,h=parseInt(b.search().start,10)||0;f();var i=[];b.search().q&&(i=b.search().q.split(" ")),a.keywords=i;var j=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1},k=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return a.splice(c,1),!0;return!1};a.showFirstPageLink=function(){return 0>=h?!1:!0},a.addKeyword=function(){if(!j(i,a.keywordInput)){var c=a.qStr;c=""===c?a.keywordInput:c+" "+a.keywordInput,b.path("/").search("limit="+g+"&q="+c)}},a.removeKeyword=function(a){if(k(i,a)){var c=i.join(" ");b.path("/").search("limit="+g+"&q="+c)}},a.qStr=i.join(" ")}]),angular.module("hnResource",["ngResource"]).factory("items",["$resource",function(a){var b="http://api.thriftdb.com/api.hnsearch.com/items/_search";return a(b,{},{get:{method:"JSONP",params:{"highlight[markup_items]":!0,q:"san+bay","filter[fields][type]":"comment",sortby:"create_ts desc",limit:10,start:10,callback:"JSON_CALLBACK"}}})}]),angular.module("idResource",["ngResource"]).factory("latestThread",["$resource",function(a){var b="http://api.thriftdb.com/api.hnsearch.com/items/_search";return a(b,{},{get:{method:"JSONP",params:{q:"hiring","filter[fields][username]":"whoishiring",sortby:"create_ts desc",limit:1,callback:"JSON_CALLBACK"}}})}]);